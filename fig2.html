<!doctype html>
<html>
<head>
<meta charset="utf-8">
<!-- タイトル -->
<title>受注伝票</title>
<!-- ウェブアプリケーション全体を対象とするスタイルシート -->
<link href="css/borgstyle.css" rel="stylesheet" type="text/css">
<!-- JQueryのグラフ作成プラグインを読み込む -->
<link rel="stylesheet" type="text/css" href="css/jquery.jqplot.min.css" />
<!-- JQueryの本体を読み込む -->
<script type="text/javascript" src="js/jquery-1.11.0.min.js"></script>
<!-- JQueryの外部プラグインセット、JQuery UIを読み込む -->
<link href="css/jquery-ui-1.10.4.custom.min.css" rel="stylesheet" type="text/css">
<!-- 必要となるJavaScriptの処理をまとめたjsファイルを読み込む -->
<script type="text/javascript" src="js/main.js"></script>
<!-- JQuery UIの使用に必要となるJSファイル -->
<script language="javascript" type="text/javascript" src="js/jquery-ui-i18n.js" charset="utf-8"></script>
<!-- グラフ描画に必要となるJSファイル -->
<script language="javascript" type="text/javascript" href="../js/jqplot.categoryAxisRenderer.min.js"></script>
<!-- グラフのプラグインのIE9対応JSの読み込み -->
<!--[if lt IE 9]>
    <script language="javascript" type="text/javascript" src="../js/excanvas.min.js"></script>
<![endif]-->
</head>
<body>
<!-- ウィンドウサイズを取得しそれに幅を合わせるdivタグcontainer -->
<div id = "container">
<!-- コンテンツ領域となるdivタグmain -->
<div class = "main">
<!-- JavaScriptのコードを記述 -->
<script type='text/javascript'>
//ページの読み込みが終わった後の処理
$(document).ready(function(){
	setButtons();	//JQuery UIのボタンを配置する
});	

//テキストボックス等の表示、非表示を切り替えて、非表示ならテキストボックス等
//の高さ分リストの高さを取る
//読み込み後
$(document).ready(function(){
	//ボタンが押されたら一度だけ計算を行う
	$('.page:first .main h1').one('click', function(){
		//リストの高さを取得
		listHeight = $('.page:first .ui-jqgrid-bdiv').height();
		//全てのテキストボックスが取っている高さを格納する変数textBoxsHeight
		textBoxsHeight = 0;
		//each関数で高さを取っている全てのテキストボックスの高さを合計する
		$('.page:first .line').each(function(){
			//テキストボックスの高さをtextBoxsHeightに加える
			textBoxsHeight += $(this).outerHeight();
		});
		//テキストボックス等を非表示にした際にリストが取る高さを変数
		//newListHeightに格納する
		newListHeight = listHeight + textBoxsHeight;
	});
	
	$('.page:first .main h1').click(function(){
	// 引数には開閉する速度を指定します
	var divs = 0;
	
	//リストのみ表示されている状態であれば
	if($('.page:first .ui-jqgrid-bdiv').height() != listHeight){
	//リストの高さを戻す
		$('.page:first .list').setGridHeight(listHeight);
	}
	$('.page:first .figs > div').not('.wrap-list').slideToggle('slow', function(){
		//divsをカウントアップしていく
		divs++;
		//最後の処理であれば
		if(divs >= $('.page:first .figs > div').not('.wrap-list').length){
			//テキストボックス等が表示いなければ
			if($(this).css('display') == 'none'){
				//リストの高さをのばす
				$('.page:first .list').setGridHeight(newListHeight);
				divs = 0;	//divsの値をリセット
			}
		}
	});
  });
});

//JavaScriptのコード記述を終える
</script>
<!-- 見出し部を開始 -->
<div id="header" class="has_voucher_status clearfix">
  <!-- ヘッダーのタイトル部分 -->
  <!-- 改行によるインライン要素同士の空白をなくすため、閉括弧を次の行の頭に記述する -->
  <div id="header-title"
    ><!-- このページの要旨 --><h1>受注伝票</h1
    ><!-- ヘッダーのタイトル部分を閉じる --></div
    ><!-- 伝票ステータス部分 --><div id="header-voucher-status"
    ><!-- 伝票ステータスのラベル部分---><span class="voucher-status-text"
    >ステータス</span
    ><!-- 伝票のプルダウンチェックボックス --><select name="voucher-status" id="voucher-status-order" class="voucher-status"
    ><!-- 伝票の状態のチェックボックス全7項目 --><option value="新規">新</option
    	><option value="見積依頼">見依</option
        ><option value="見積書発行">見</option
        ><option value="注文請書発行">注</option
        ><option value="納品書発行">納</option
        ><option value="請求書発行">請</option
        ><option value="領収書発行">領</option
        ><!-- 伝票のプルダウンチェックボックスを閉じる --></select><!--伝票ステータス部分を閉じる --></div
        ><!-- ヘッダーのボタン群 --><div id="header-buttons" class="variable-height"
        	><span id="disp"></span
            ><!-- 閉じるボタン --><button class="backbutton button close-button" value="戻る" name="fig1" /
            ><!-- リンクのリストダイアログを出すボタン --><button class="button setting-button" /
            ><!-- ヘッダーのボタン群を閉じる --></div
            ><!-- ヘッダー部分を終える --></div>
<!-- fig2独自の記述を開始 -->
<div id = "fig2" class="figs">
  <!-- 受注Noを記入する左寄せの枠 -->
  <div class="line half_line parallel-text variable-height left">
    <!-- 項目名 -->
    <label for="textfield">受注No</label>
    <!-- 受注Noを格納するテキストボックス -->
    <input type="text" name="orderNo" id="orderNo" class="textbox_S default_textbox parts_height" value="00001">
    </div>
  <!-- 日付を入力する右寄せの枠 -->  
  <div class="half_line parallel-text variable-height right">
    <!-- 項目名 -->
    <label for="textfield2">日付</label>
    <!-- 日付を入力するテキストボックス。カレンダーを呼び出して日付選択 -->
    <input type="text" name="date" id="date" class="textbox_S date default_textbox parts_height" readonly>
    </div>
  
  <div class="line half_line parallel-text variable-height left">
    <label for="textfield3">納品希望日</label>
    <input type="text" name="wish_date" id="wish_date"  class="textbox_S date default_textbox parts_height"  readonly="readonly">
    </div>
  <div class="half_line parallel-text variable-height right">
    <label for="textfield4">発注日</label>
    <input type="text" name="parchase_date" id="parchase_date"  class="textbox_S date default_textbox parts_height  parts_height"  readonly="readonly">
    </div>
  <div class="line half_line parallel-text variable-height left">
    <label for="textfield5">担当者</label>
    <select name="charger" id="charger"  class="textbox_S pulldown-menu person default_textbox parts_height">
    	<option value="">入力、または選択してください</option>
      </select>
    </div>
  <div class="half_line parallel-text variable-height right">
    <label for="textfield6">作成者</label>
    <select name="writer" id="writer"  class="textbox_S pulldown-menu person default_textbox parts_height">
    <option value="">入力、または選択してください</option>
      </select>
    </div>
  <div class="line half_line parallel-text variable-height left">
    <label for="textfield7">入金予定日</label>
    <input type="text" name="scheduled_payment" id="scheduled_payment"  class="textbox_S date default_textbox parts_height"  readonly="readonly">
    </div>
  <div class="half_line parallel-text variable-height right">
    <label for="textfield8">入金日</label>
    <input type="text" name="fixed_payment" id="fixed_payment" class="textbox_S date default_textbox parts_height" readonly>
    </div>
  <div class="line a_line single-line-text variable-height">
    <label for="textfield9">顧客名</label>
    <select name="customer" id="customer"  class="textbox_L  pulldown-menu customer select-text-box default_textbox parts_height">
    	<option value="">入力、または選択してください</option>
      </select>
    </div>
  <div class="line before_list_line variable-height">
  <!-- 
     @mod
	 6/21 11:20
     callpagesと請求額をbefore_list_line variable-heightで囲む
     T.M
     @mod
     6/25 17:00
     before_list_line variable-heightの中に消費税と合計の欄を追加。
     -->
    <div class="edit_buttons margin-bottom">
      <button name="fig2-1" id="add_button" class="callpage button add-button" value="追加" />
      <button name="fig2-1" id="edit_button" class="callpage button edit-button" value="編集" />
      <button name="delete_button" id="delete_button" class="button delete-button" value="削除" />
      </div>
    <div class="parallel-text variable-height right textbox_M bill margin-bottom">
      <label for="textfield8">請求額</label>
      <input type="text" readonly name="bill" id="bill"  value="\135,432-" class="textbox_S default_textbox">
      </div>
    <div class="parallel-text variable-height right textbox_M bill margin-bottom">
      <label for="textfield8">消費税</label>
      <input type="text" readonly name="bill" id="bill"  value="\10,032-" class="textbox_S default_textbox">
      </div>
    </div>
  <!-- リストを包むタグ。リストが他のfloat要素に回り込むのを阻止する -->
  <div class="wrap-list">
    <!-- JQ Gridによりリストを形成するtableタグ -->
    <table id="fig2-list" class="list"></table>
    </div>
</div>
</div>
</div>
</body>
</html>